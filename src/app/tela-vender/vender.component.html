<div class="box">
  <div class="tituloBox">
    <h2>Lista de Sócios</h2>
    <a>Editar</a>
  </div>
  <div class="filtros">
    <input type="text" placeholder="Busca por nome" [(ngModel)]="filterSocios" />
    <select name="grau" title="Filtro por Grau" [(ngModel)]="filterGrau">
      <option value="">Filtro por Grau</option>
      <option value="VI">Visitante</option>
      <option value="QS">Quadro de Sócio</option>
      <option value="CI">Corpo Instrutivo</option>
      <option value="CDC">Corpo do Conselho</option>
      <option value="QM">Quadro de Mestre</option>
    </select>
  </div>
  <div class="tableScroll">
    <table class="socios">
      <thead>
        <tr>
          <th>GRAU</th>
          <th>NOME</th>
          <th class="alignRight">DÉBITO</th>
        </tr>
      </thead>

      <tbody>
        <tr
          [class.active]="socioSelecionadoIndex === i"
          (click)="pegarSocio(socio, i)"
          *ngFor="
            let socio of dataSocios | buscaPalavras : filterSocios | buscaGrau : filterGrau;
            let i = index
          "
        >
          <td>
            <span
              [ngClass]="{
                grauQM: socio.grau === 'QM',
                grauCDC: socio.grau === 'CDC',
                grauCI: socio.grau === 'CI',
                grauQS: socio.grau === 'QS',
                grauVI: socio.grau === 'VI'
              }"
              class="tag"
            >
              {{ socio.grau }}
            </span>
          </td>
          <td>
            <span class="nome">{{ socio.nome }}</span>
          </td>
          <td class="alignRight">
            <span
              class="debito"
              [ngClass]="{
                saldoPositivo: (socio | calculoDebito : vendasAbertas) > 0,
                saldoNegativo: (socio | calculoDebito : vendasAbertas) < 0
              }"
              >{{ socio | calculoDebito : vendasAbertas | currency : "R$" }}</span
            >
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="box">
  <div class="tituloBox">
    <h2>Lista de Produtos</h2>
    <a>Editar</a>
  </div>
  <div class="filtros">
    <input [(ngModel)]="filterProdutos" type="text" placeholder="Busca por nome" />
    <select name="tipo" title="Filtro por Tipo" [(ngModel)]="filterTipo">
      <option value="">Filtro por Tipo</option>
      <option value="{{ produto.tipo.nome }}" *ngFor="let produto of dataProdutos">
        {{ produto.tipo.nome }}
      </option>
    </select>
  </div>
  <div class="tableScroll">
    <table class="produtos">
      <tr>
        <th>TIPO</th>
        <th>NOME</th>
        <th class="alignRight">PREÇO</th>
      </tr>
      <tr
        *ngFor="
          let produto of dataProdutos | buscaPalavras : filterProdutos | buscaTipo : filterTipo;
          let i = index
        "
        [class.inativo]="produto.ativo == false"
      >
        <td (click)="adicionarProduto(produto)">
          <span
            [ngClass]="{
              tipoAcai: produto.tipo.nome === 'Açai',
              tipoDoce: produto.tipo.nome === 'Doce',
              tipoBebida: produto.tipo.nome === 'Bebida',
              tipoSalgado: produto.tipo.nome === 'Salgado'
            }"
            class="tag"
            >{{ produto.tipo.nome }}</span
          >
        </td>
        <td (click)="adicionarProduto(produto)">
          <span class="nome">{{ produto.nome }}</span>
        </td>
        <td class="center">
          <span
            class="acoes"
            [ngClass]="{
              temProduto: calcularQuantidade(produto) > 0
            }"
          >
            <button (click)="removerProduto(produto)" class="removerProduto">-</button>
            <button class="qtdProduto">{{ calcularQuantidade(produto) }}</button>
            <button (click)="adicionarProduto(produto)" class="AdicionarProduto">+</button>
          </span>
        </td>
        <td class="alignRight">
          <span class="debito">{{ produto.precoVenda | currency : "R$" }}</span>
        </td>
      </tr>
    </table>
  </div>
</div>

<app-barra-venda
  [dataVendas]="dataVendas"
  [valorTotal]="valorTotal"
  (terminouCompra)="terminouCompra($event)"
  [listaProdutosSelecionados]="listaProdutosSelecionados"
  [produtosAgrupados]="listaAgrupada"
  [socioSelecionado]="socioSelecionado"
></app-barra-venda>
